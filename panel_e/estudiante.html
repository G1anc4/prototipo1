<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel del Estudiante - Poliweb</title>
    <link rel="stylesheet" href="css/estudiante.css">
</head>
<body>
    <header>
        <div class="logo">Poliweb - Panel del Estudiante</div>
        <button class="logout-btn" onclick="cerrarSesion()">Cerrar sesiÃ³n</button>
    </header>

    <main class="main">
        <div class="card">
            <div class="profile-section">
                <div class="profile-icon">
                    ğŸ‘¨â€ğŸ“
                </div>
                <div class="profile-info">
                    <h3 id="nombreEstudiante"></h3>
                    <p>DNI: <span id="dniEstudiante"></span></p>
                    <span class="badge main-area-badge" id="areaEstudianteBadge"></span>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h3>ğŸ“Š Mis calificaciones por Ã¡rea</h3>
            <div class="areas-container" id="areasContainer"></div>
        </div>
        
        <div class="card">
            <h3>ğŸ“¤ Entregar trabajo</h3>
            <div class="file-section">
                <select id="areaTrabajo" class="file-input">
                    <option value="">-- Selecciona un Ã¡rea --</option>
                    <option value="Ciencia y tecnologÃ­a">ğŸ”¬ Ciencia y tecnologÃ­a</option>
                    <option value="MatemÃ¡tica">ğŸ§® MatemÃ¡tica</option>
                    <option value="ComunicaciÃ³n">ğŸ“ ComunicaciÃ³n</option>
                    <option value="DPCC">ğŸ›ï¸ DPCC</option>
                    <option value="InglÃ©s">ğŸŒ InglÃ©s</option>
                    <option value="Ciencias sociales">ğŸ™ï¸ Ciencias sociales</option>
                    <option value="Arte">ğŸ¨ Arte</option>
                    <option value="ReligiÃ³n">ğŸ™ ReligiÃ³n</option>
                    <option value="EPT">ğŸ› ï¸ EPT</option>
                    <option value="EducaciÃ³n fÃ­sica">âš½ EducaciÃ³n fÃ­sica</option>
                </select>
                
                <label for="archivoTrabajo" style="display: block; margin: 1rem 0 0.5rem; font-weight: bold;">
                    ğŸ“ Seleccionar archivo:
                </label>
                <input type="file" id="archivoTrabajo" accept="image/*,.pdf,.doc,.docx,.xls,.xlsx">
                
                <button class="submit-btn" onclick="enviarArchivo()" id="submitBtn">
                    <span id="btnText">Enviar archivo</span>
                    <span id="btnLoading" class="loading" style="display: none;"></span>
                </button>
                
                <div class="file-info" id="ultimoArchivoInfo">
                    <p class="last-file">Ãšltimo archivo enviado:</p>
                    <p id="nombreArchivo">ğŸ“„ Sin archivos enviados</p>
                    <p id="areaArchivo">ğŸ“š NingÃºn Ã¡rea seleccionada</p>
                    <p id="fechaArchivo">ğŸ“… Sin fecha de envÃ­o</p>
                </div>
            </div>
        </div>
    </main>

    <!-- === BOTÃ“N Y MODAL DE LOGROS === -->
    <button id="verLogrosBtn" title="Tus logros">ğŸ†</button>
    <div class="notificacion-logro" id="notificacionLogro">
        <strong>Â¡Logro desbloqueado!</strong>
        <div id="logroDesbloqueadoTitulo"></div>
    </div>
    <div class="logros-container" id="logrosContainer">
        <div class="logros-content">
            <h2>ğŸ† Tus Logros</h2>
            <div id="listaLogros"></div>
            <button onclick="cerrarLogros()" class="submit-btn">Cerrar</button>
        </div>
    </div>

    <!-- === CHATBOT === -->
    <div class="chatbot-container">
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <div class="chatbot-icon">ğŸ¤–</div>
                <h3>Bianca</h3>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="message bot-message">
                    Â¡Hola <span id="studentNameChat"></span>! Soy tu asistente educativo. Â¿En quÃ© puedo ayudarte hoy?
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="userMessage" placeholder="Escribe tu pregunta..." autocomplete="off">
                <button id="sendMessage">â¤</button>
            </div>
        </div>
        <div class="chatbot-toggle" id="chatbotToggle">
            ğŸ’¬
        </div>
    </div>

<button onclick="probarConexion()">Probar conexiÃ³n a Neon</button>

<script>
  async function probarConexion() {
    try {
      const res = await fetch('/.netlify/functions/getPost?id=1');
      const data = await res.json();
      console.log('Respuesta desde Neon:', data);
      alert(JSON.stringify(data, null, 2)); // Muestra los datos en alerta
    } catch (error) {
      alert('Error al conectar con la base de datos');
      console.error(error);
    }
  }
</script>



   <script src="js/chatbotDB.js"></script>
   <script src="js/logros.js"></script>
   <script src="js/estudiante.js"></script>
</body>
</html>